#!/usr/bin/env python3
"""
åé›†ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªæ§‹é€ ã«æ•´ç†
"""

import os
import json
import shutil
from datetime import datetime
from pathlib import Path

def organize_data():
    """ãƒ‡ãƒ¼ã‚¿ã‚’æ•´ç†ã•ã‚ŒãŸæ§‹é€ ã«å†é…ç½®"""

    # ãƒ™ãƒ¼ã‚¹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
    base_dir = Path(".")

    # æ–°ã—ã„ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ã‚’ä½œæˆ
    organized_dir = base_dir / "ğŸ“Š_è«–æ–‡ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹_2024å¹´9æœˆ"

    # ãƒ¡ã‚¤ãƒ³ãƒ•ã‚©ãƒ«ãƒ€ä½œæˆ
    organized_dir.mkdir(exist_ok=True)

    # ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ 
    folders = {
        "ğŸ”¬_ç ”ç©¶è«–æ–‡ãƒ‡ãƒ¼ã‚¿": {
            "01_ç¾å®¹ãƒ»ã‚¨ã‚¤ã‚¸ãƒ³ã‚°ã‚±ã‚¢": ["database/expanded_collection/beauty_aging_papers.json"],
            "02_å¥åº·ãƒ»ã‚¦ã‚§ãƒ«ãƒã‚¹": ["database/expanded_collection/health_wellness_papers.json"],
            "03_ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹": ["database/expanded_collection/mental_physical_performance_papers.json"],
            "04_ãƒ€ã‚¤ã‚¨ãƒƒãƒˆãƒ»ãƒœãƒ‡ã‚£ã‚±ã‚¢": ["database/expanded_collection/diet_body_contouring_papers.json"],
            "05_ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«": ["database/expanded_collection/lifecycle_gender_papers.json"],
            "06_ãƒˆãƒ¬ãƒ³ãƒ‰æˆåˆ†": ["database/expanded_collection/trending_ingredients_papers.json"],
            "07_æ–°èˆˆæˆåˆ†": ["database/expanded_collection/emerging_ingredients_papers.json"],
            "08_ã‚³ãƒ³ã‚»ãƒ—ãƒˆãƒ»é£Ÿäº‹æ³•": ["database/expanded_collection/concepts_diets_papers.json"],
            "09_æŠ€è¡“ãƒ»è£½æ³•": ["database/expanded_collection/technology_formulation_papers.json"]
        },
        "ğŸ“ˆ_åˆ†æãƒ¬ãƒãƒ¼ãƒˆ": {
            "ã‚¤ãƒ³ãƒŠãƒ¼ã‚±ã‚¢åˆ†æ": ["database/innercare_analysis/"],
            "äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«": ["database/innercare_analysis/prediction_model_20250924.json"],
            "ãƒ›ãƒƒãƒˆãƒˆãƒ”ãƒƒã‚¯": ["database/innercare_analysis/hot_topics_20250924.json"],
            "å®Ÿç”¨åŒ–æ¨å¥¨": ["database/innercare_analysis/commercialization_recommendations_20250924.json"]
        },
        "ğŸ–¥ï¸_ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰": {
            "åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰": ["innercare_dashboard_interactive.html"],
            "ãƒ‡ãƒ¼ã‚¿ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼": ["pubmed_data_viewer.html"],
            "åˆ†æãƒ—ãƒ­ã‚»ã‚¹å¯è¦–åŒ–": ["analysis_process_viewer.html"]
        },
        "ğŸ“‹_ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿": {
            "çµ±åˆãƒ‡ãƒ¼ã‚¿ï¼ˆ9,087ä»¶ï¼‰": ["database/expanded_collection/master_expanded_papers.json"],
            "åˆæœŸãƒ‡ãƒ¼ã‚¿ï¼ˆ4,251ä»¶ï¼‰": ["database/master_papers.json"],
            "åé›†çµ±è¨ˆ": ["database/expanded_collection/collection_stats.json"]
        }
    }

    # ãƒ•ã‚©ãƒ«ãƒ€ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ•´ç†
    for main_folder, sub_items in folders.items():
        main_path = organized_dir / main_folder
        main_path.mkdir(exist_ok=True)

        for sub_name, file_paths in sub_items.items():
            sub_path = main_path / sub_name

            for file_path in file_paths:
                src = base_dir / file_path

                if src.exists():
                    if src.is_dir():
                        # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®å ´åˆ
                        if sub_path.exists():
                            shutil.rmtree(sub_path)
                        shutil.copytree(src, sub_path)
                    else:
                        # ãƒ•ã‚¡ã‚¤ãƒ«ã®å ´åˆ
                        sub_path.parent.mkdir(parents=True, exist_ok=True)
                        shutil.copy2(src, sub_path)
                    print(f"âœ… ã‚³ãƒ”ãƒ¼å®Œäº†: {sub_name}")

    # READMEä½œæˆ
    readme_content = f"""# ğŸ“Š ã‚¤ãƒ³ãƒŠãƒ¼ã‚±ã‚¢ãƒ»å¥åº·é£Ÿå“ãƒˆãƒ¬ãƒ³ãƒ‰è«–æ–‡ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

## æ¦‚è¦
- **åé›†æ—¥**: {datetime.now().strftime('%Yå¹´%mæœˆ%dæ—¥')}
- **ç·è«–æ–‡æ•°**: 9,087ä»¶
- **ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ•°**: 206å€‹
- **ãƒ‡ãƒ¼ã‚¿æœŸé–“**: éå»5å¹´é–“ï¼ˆ2020-2025ï¼‰

## ğŸ“ ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ

### ğŸ”¬ ç ”ç©¶è«–æ–‡ãƒ‡ãƒ¼ã‚¿
å„ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥ã«æ•´ç†ã•ã‚ŒãŸè«–æ–‡ãƒ‡ãƒ¼ã‚¿ï¼ˆJSONå½¢å¼ï¼‰

- **01_ç¾å®¹ãƒ»ã‚¨ã‚¤ã‚¸ãƒ³ã‚°ã‚±ã‚¢** (1,401ä»¶)
  - ã‚¹ã‚­ãƒ³ã‚±ã‚¢ã€ã‚¢ãƒ³ãƒã‚¨ã‚¤ã‚¸ãƒ³ã‚°ã€ãƒ˜ã‚¢ã‚±ã‚¢ãªã©

- **02_å¥åº·ãƒ»ã‚¦ã‚§ãƒ«ãƒã‚¹** (1,243ä»¶)
  - å…ç–«ã€è…¸å†…ç’°å¢ƒã€ç”Ÿæ´»ç¿’æ…£ç—…äºˆé˜²ãªã©

- **03_ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹** (990ä»¶)
  - ã‚¹ãƒˆãƒ¬ã‚¹ã€ç¡çœ ã€èªçŸ¥æ©Ÿèƒ½ãªã©

- **04_ãƒ€ã‚¤ã‚¨ãƒƒãƒˆãƒ»ãƒœãƒ‡ã‚£ã‚±ã‚¢** (497ä»¶)
  - æ¸›é‡ã€ä½“è„‚è‚ªã€ç­‹è‚‰å¢—å¼·ãªã©

- **05_ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«** (556ä»¶)
  - å¦Šæ´»ã€æ›´å¹´æœŸã€ç”·æ€§å¥åº·ãªã©

- **06_ãƒˆãƒ¬ãƒ³ãƒ‰æˆåˆ†** (2,396ä»¶) â­æœ€å¤š
  - ã‚³ãƒ©ãƒ¼ã‚²ãƒ³ã€ãƒ“ã‚¿ãƒŸãƒ³ã€ãƒ—ãƒ­ãƒã‚¤ã‚ªãƒ†ã‚£ã‚¯ã‚¹ãªã©

- **07_æ–°èˆˆæˆåˆ†** (596ä»¶)
  - NMNã€CBDã€ã‚¨ã‚¯ã‚½ã‚½ãƒ¼ãƒ ãªã©

- **08_ã‚³ãƒ³ã‚»ãƒ—ãƒˆãƒ»é£Ÿäº‹æ³•** (1,010ä»¶)
  - æ©Ÿèƒ½æ€§é£Ÿå“ã€ã‚±ãƒˆã‚¸ã‚§ãƒ‹ãƒƒã‚¯ã€æ–­é£Ÿãªã©

- **09_æŠ€è¡“ãƒ»è£½æ³•** (398ä»¶)
  - ãƒªãƒã‚½ãƒ¼ãƒ ã€ãƒŠãƒæŠ€è¡“ã€ç™ºé…µæŠ€è¡“ãªã©

### ğŸ“ˆ åˆ†æãƒ¬ãƒãƒ¼ãƒˆ
AIåˆ†æã«ã‚ˆã‚‹æ´å¯Ÿã¨ãƒˆãƒ¬ãƒ³ãƒ‰äºˆæ¸¬

- **ã‚¤ãƒ³ãƒŠãƒ¼ã‚±ã‚¢åˆ†æ**: æˆåˆ†åˆ¥ã®è©³ç´°åˆ†æ
- **äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«**: 6ãƒ¶æœˆã€œ2å¹´å¾Œã®ãƒˆãƒ¬ãƒ³ãƒ‰äºˆæ¸¬
- **ãƒ›ãƒƒãƒˆãƒˆãƒ”ãƒƒã‚¯**: æ€¥æˆé•·ä¸­ã®ãƒˆãƒ¬ãƒ³ãƒ‰
- **å®Ÿç”¨åŒ–æ¨å¥¨**: å•†å“åŒ–æ¨å¥¨æˆåˆ†ãƒªã‚¹ãƒˆ

### ğŸ–¥ï¸ ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã‘ã‚‹å¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«

- **åˆ†æãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**: ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒˆãƒ¬ãƒ³ãƒ‰è¡¨ç¤º
- **ãƒ‡ãƒ¼ã‚¿ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼**: è«–æ–‡ãƒ‡ãƒ¼ã‚¿ã®æ¤œç´¢ãƒ»é–²è¦§
- **åˆ†æãƒ—ãƒ­ã‚»ã‚¹å¯è¦–åŒ–**: AIã®åˆ†æãƒ­ã‚¸ãƒƒã‚¯è§£èª¬

### ğŸ“‹ ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿
å…¨ãƒ‡ãƒ¼ã‚¿ã®çµ±åˆãƒ•ã‚¡ã‚¤ãƒ«

- **çµ±åˆãƒ‡ãƒ¼ã‚¿**: 9,087ä»¶ã®å…¨è«–æ–‡ãƒ‡ãƒ¼ã‚¿
- **åˆæœŸãƒ‡ãƒ¼ã‚¿**: æœ€åˆã®4,251ä»¶
- **åé›†çµ±è¨ˆ**: åé›†ãƒ—ãƒ­ã‚»ã‚¹ã®è©³ç´°è¨˜éŒ²

## ğŸš€ ä½¿ã„æ–¹

### ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’é–‹ã
HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã„ã¦ãã ã•ã„ã€‚

### JSONãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æã™ã‚‹
Pythonã‚„Excelã§JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ç‹¬è‡ªã®åˆ†æãŒå¯èƒ½ã§ã™ã€‚

```python
import json

# ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ä¾‹
with open('ğŸ“‹_ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿/çµ±åˆãƒ‡ãƒ¼ã‚¿ï¼ˆ9,087ä»¶ï¼‰', 'r') as f:
    data = json.load(f)
```

## ğŸ“Š ä¸»ãªæˆæœ
- NMNã€CBDã€ã‚¨ã‚¯ã‚½ã‚½ãƒ¼ãƒ ãªã©æœ€æ–°ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’ç¶²ç¾…
- ã‚°ãƒ«ã‚¿ãƒã‚ªãƒ³ã€ã‚¢ã‚¹ã‚¿ã‚­ã‚µãƒ³ãƒãƒ³ã®æ€¥æˆé•·ã‚’æ¤œå‡º
- è…¸å†…ç’°å¢ƒç³»ã‚µãƒ—ãƒªãƒ¡ãƒ³ãƒˆã®é•·æœŸãƒˆãƒ¬ãƒ³ãƒ‰ã‚’äºˆæ¸¬

## ğŸ’¡ æ´»ç”¨ä¾‹
- æ–°å•†å“é–‹ç™ºã®æ–¹å‘æ€§æ±ºå®š
- ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°æˆ¦ç•¥ç«‹æ¡ˆ
- ç«¶åˆåˆ†æ
- æŠ•è³‡åˆ¤æ–­

---
â€»ã“ã®ãƒ‡ãƒ¼ã‚¿ã¯ç ”ç©¶ç›®çš„ã§åé›†ã•ã‚ŒãŸPubMedè«–æ–‡ãƒ‡ãƒ¼ã‚¿ã§ã™ã€‚
"""

    readme_path = organized_dir / "README.md"
    with open(readme_path, 'w', encoding='utf-8') as f:
        f.write(readme_content)

    print(f"""
    ====================================
    ãƒ‡ãƒ¼ã‚¿æ•´ç†å®Œäº†ï¼
    ====================================

    ä¿å­˜å…ˆ: {organized_dir}

    ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ:
    ğŸ“Š_è«–æ–‡ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹_2024å¹´9æœˆ/
    â”œâ”€â”€ ğŸ”¬_ç ”ç©¶è«–æ–‡ãƒ‡ãƒ¼ã‚¿/ï¼ˆã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥ï¼‰
    â”œâ”€â”€ ğŸ“ˆ_åˆ†æãƒ¬ãƒãƒ¼ãƒˆ/ï¼ˆAIåˆ†æçµæœï¼‰
    â”œâ”€â”€ ğŸ–¥ï¸_ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰/ï¼ˆå¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«ï¼‰
    â”œâ”€â”€ ğŸ“‹_ãƒã‚¹ã‚¿ãƒ¼ãƒ‡ãƒ¼ã‚¿/ï¼ˆçµ±åˆãƒ‡ãƒ¼ã‚¿ï¼‰
    â””â”€â”€ README.mdï¼ˆä½¿ã„æ–¹ã‚¬ã‚¤ãƒ‰ï¼‰

    ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¯HTMLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã§é–‹ã‘ã¾ã™ã€‚
    """)

    return organized_dir

if __name__ == "__main__":
    organize_data()