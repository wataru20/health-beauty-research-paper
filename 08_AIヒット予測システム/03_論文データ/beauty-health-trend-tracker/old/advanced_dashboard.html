<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¾å®¹ãƒ»å¥åº·ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æã‚·ã‚¹ãƒ†ãƒ  - Advanced Dashboard</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Helvetica Neue', Arial, 'Hiragino Sans', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }

        h1 {
            color: #333;
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 1.1rem;
        }

        .tab-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 10px;
            border-radius: 15px;
            margin-bottom: 30px;
            display: flex;
            gap: 10px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .tab-button {
            flex: 1;
            padding: 15px;
            border: none;
            background: transparent;
            color: #666;
            font-size: 1.1rem;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        .tab-button.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.5s ease-in-out;
        }

        .stats-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-label {
            color: #666;
            margin-top: 5px;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .card-title {
            font-size: 1.3rem;
            color: #333;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
        }

        .card-title .emoji {
            margin-right: 10px;
            font-size: 1.5rem;
        }

        .hot-topics-list {
            list-style: none;
        }

        .hot-topic-item {
            background: linear-gradient(90deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 15px;
            margin-bottom: 10px;
            border-radius: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
        }

        .hot-topic-item.category-item {
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        }

        .hot-topic-item.ingredient-item {
            background: linear-gradient(90deg, #f093fb 0%, #f5576c 100%);
        }

        .hot-topic-item:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .topic-name {
            font-weight: bold;
            flex: 1;
        }

        .topic-count {
            margin-left: 15px;
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .topic-growth {
            background: rgba(255,255,255,0.3);
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s ease;
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 30px;
            border-radius: 20px;
            width: 80%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: slideIn 0.3s ease;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            color: #000;
        }

        .modal-header {
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.8rem;
            color: #333;
        }

        .ingredient-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin-top: 20px;
        }

        .ingredient-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 10px 15px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .ingredient-badge:hover {
            transform: scale(1.05);
        }

        .ingredient-badge .count {
            display: block;
            font-size: 0.8rem;
            margin-top: 5px;
            opacity: 0.9;
        }

        .chart-container {
            position: relative;
            height: 300px;
            margin: 20px 0;
        }

        .trend-badge {
            display: inline-block;
            padding: 5px 12px;
            margin: 5px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .trend-badge:hover {
            transform: scale(1.05);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes slideIn {
            from {
                transform: translateY(-30px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @media (max-width: 768px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            .tab-container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”¬ ç¾å®¹ãƒ»å¥åº·ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æã‚·ã‚¹ãƒ†ãƒ </h1>
            <div class="subtitle">ğŸ“Š è«–æ–‡ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ 2024å¹´9æœˆç‰ˆ (9,087ä»¶) - Advanced Analytics</div>
        </div>

        <div class="tab-container">
            <button class="tab-button active" onclick="switchTab('category')">
                ğŸ“‚ ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ†æ
            </button>
            <button class="tab-button" onclick="switchTab('ingredient')">
                ğŸ§ª æˆåˆ†åˆ†æ
            </button>
            <button class="tab-button" onclick="switchTab('trend')">
                ğŸ“ˆ ãƒˆãƒ¬ãƒ³ãƒ‰äºˆæ¸¬
            </button>
        </div>

        <!-- ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ†æã‚¿ãƒ– -->
        <div id="categoryTab" class="tab-content active">
            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-value">9</div>
                    <div class="stat-label">ãƒ¡ã‚¤ãƒ³ã‚«ãƒ†ã‚´ãƒªãƒ¼</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">25+</div>
                    <div class="stat-label">ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒªãƒ¼</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">2,396</div>
                    <div class="stat-label">æœ€å¤§ã‚«ãƒ†ã‚´ãƒªãƒ¼è«–æ–‡æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">26.4%</div>
                    <div class="stat-label">ãƒˆãƒ¬ãƒ³ãƒ‰æˆåˆ†å‰²åˆ</div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="card">
                    <h2 class="card-title">
                        <span class="emoji">ğŸ“Š</span>
                        ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ¥HOTãƒˆãƒ”ãƒƒã‚¯ã‚¹
                    </h2>
                    <ul class="hot-topics-list">
                        <li class="hot-topic-item category-item" onclick="showCategoryDetail('trending_ingredients', 'ãƒˆãƒ¬ãƒ³ãƒ‰æˆåˆ†')">
                            <span class="topic-name">ãƒˆãƒ¬ãƒ³ãƒ‰æˆåˆ†</span>
                            <span class="topic-count">2,396ä»¶</span>
                            <span class="topic-growth">â†‘35%</span>
                        </li>
                        <li class="hot-topic-item category-item" onclick="showCategoryDetail('beauty_aging', 'ç¾å®¹ãƒ»ã‚¨ã‚¤ã‚¸ãƒ³ã‚°')">
                            <span class="topic-name">ç¾å®¹ãƒ»ã‚¨ã‚¤ã‚¸ãƒ³ã‚°</span>
                            <span class="topic-count">1,401ä»¶</span>
                            <span class="topic-growth">â†‘18%</span>
                        </li>
                        <li class="hot-topic-item category-item" onclick="showCategoryDetail('health_wellness', 'å¥åº·ãƒ»ã‚¦ã‚§ãƒ«ãƒã‚¹')">
                            <span class="topic-name">å¥åº·ãƒ»ã‚¦ã‚§ãƒ«ãƒã‚¹</span>
                            <span class="topic-count">1,243ä»¶</span>
                            <span class="topic-growth">â†‘22%</span>
                        </li>
                        <li class="hot-topic-item category-item" onclick="showCategoryDetail('concepts_diets', 'ã‚³ãƒ³ã‚»ãƒ—ãƒˆãƒ»ãƒ€ã‚¤ã‚¨ãƒƒãƒˆ')">
                            <span class="topic-name">ã‚³ãƒ³ã‚»ãƒ—ãƒˆãƒ»ãƒ€ã‚¤ã‚¨ãƒƒãƒˆ</span>
                            <span class="topic-count">1,010ä»¶</span>
                            <span class="topic-growth">â†‘12%</span>
                        </li>
                        <li class="hot-topic-item category-item" onclick="showCategoryDetail('mental_physical', 'ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ»èº«ä½“ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹')">
                            <span class="topic-name">ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ»èº«ä½“ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹</span>
                            <span class="topic-count">990ä»¶</span>
                            <span class="topic-growth">â†‘38%</span>
                        </li>
                        <li class="hot-topic-item category-item" onclick="showCategoryDetail('emerging_ingredients', 'æ–°èˆˆæˆåˆ†')">
                            <span class="topic-name">æ–°èˆˆæˆåˆ†</span>
                            <span class="topic-count">596ä»¶</span>
                            <span class="topic-growth">â†‘45%</span>
                        </li>
                    </ul>
                </div>

                <div class="card">
                    <h2 class="card-title">
                        <span class="emoji">ğŸ“ˆ</span>
                        ã‚«ãƒ†ã‚´ãƒªãƒ¼åˆ†å¸ƒ
                    </h2>
                    <div class="chart-container">
                        <canvas id="categoryChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- æˆåˆ†åˆ†æã‚¿ãƒ– -->
        <div id="ingredientTab" class="tab-content">
            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-value">2,992</div>
                    <div class="stat-label">æˆåˆ†é–¢é€£è«–æ–‡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">150+</div>
                    <div class="stat-label">æ³¨ç›®æˆåˆ†æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">45%</div>
                    <div class="stat-label">æ–°è¦æˆåˆ†å¢—åŠ ç‡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">78%</div>
                    <div class="stat-label">æ¤ç‰©ç”±æ¥æˆåˆ†æ¯”ç‡</div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="card">
                    <h2 class="card-title">
                        <span class="emoji">ğŸ§ª</span>
                        æˆåˆ†åˆ¥HOTãƒˆãƒ”ãƒƒã‚¯ã‚¹
                    </h2>
                    <ul class="hot-topics-list">
                        <li class="hot-topic-item ingredient-item">
                            <span class="topic-name">ã‚³ãƒ©ãƒ¼ã‚²ãƒ³ãƒšãƒ—ãƒãƒ‰</span>
                            <span class="topic-count">287ä»¶</span>
                            <span class="topic-growth">â†‘42%</span>
                        </li>
                        <li class="hot-topic-item ingredient-item">
                            <span class="topic-name">NMN (ãƒ‹ã‚³ãƒãƒ³ã‚¢ãƒŸãƒ‰ãƒ¢ãƒãƒŒã‚¯ãƒ¬ã‚ªãƒãƒ‰)</span>
                            <span class="topic-count">245ä»¶</span>
                            <span class="topic-growth">â†‘68%</span>
                        </li>
                        <li class="hot-topic-item ingredient-item">
                            <span class="topic-name">ãƒ—ãƒ­ãƒã‚¤ã‚ªãƒ†ã‚£ã‚¯ã‚¹è¤‡åˆä½“</span>
                            <span class="topic-count">238ä»¶</span>
                            <span class="topic-growth">â†‘35%</span>
                        </li>
                        <li class="hot-topic-item ingredient-item">
                            <span class="topic-name">CBD/ã‚«ãƒ³ãƒŠãƒ“ãƒã‚¤ãƒ‰</span>
                            <span class="topic-count">198ä»¶</span>
                            <span class="topic-growth">â†‘55%</span>
                        </li>
                        <li class="hot-topic-item ingredient-item">
                            <span class="topic-name">ã‚¨ã‚¯ã‚½ã‚½ãƒ¼ãƒ </span>
                            <span class="topic-count">186ä»¶</span>
                            <span class="topic-growth">â†‘92%</span>
                        </li>
                        <li class="hot-topic-item ingredient-item">
                            <span class="topic-name">æ¤ç‰©å¹¹ç´°èƒã‚¨ã‚­ã‚¹</span>
                            <span class="topic-count">175ä»¶</span>
                            <span class="topic-growth">â†‘38%</span>
                        </li>
                        <li class="hot-topic-item ingredient-item">
                            <span class="topic-name">ã‚¢ãƒ€ãƒ—ãƒˆã‚²ãƒ³è¤‡åˆä½“</span>
                            <span class="topic-count">168ä»¶</span>
                            <span class="topic-growth">â†‘45%</span>
                        </li>
                        <li class="hot-topic-item ingredient-item">
                            <span class="topic-name">ãƒã‚¹ãƒˆãƒã‚¤ã‚ªãƒ†ã‚£ã‚¯ã‚¹</span>
                            <span class="topic-count">156ä»¶</span>
                            <span class="topic-growth">â†‘78%</span>
                        </li>
                        <li class="hot-topic-item ingredient-item">
                            <span class="topic-name">æµ·æ´‹ç”±æ¥ãƒšãƒ—ãƒãƒ‰</span>
                            <span class="topic-count">142ä»¶</span>
                            <span class="topic-growth">â†‘32%</span>
                        </li>
                        <li class="hot-topic-item ingredient-item">
                            <span class="topic-name">ç™ºé…µã‚¨ã‚­ã‚¹è¤‡åˆä½“</span>
                            <span class="topic-count">135ä»¶</span>
                            <span class="topic-growth">â†‘28%</span>
                        </li>
                    </ul>
                </div>

                <div class="card">
                    <h2 class="card-title">
                        <span class="emoji">ğŸŒŸ</span>
                        æ³¨ç›®ã®æ–°è¦æˆåˆ†
                    </h2>
                    <div>
                        <span class="trend-badge">ã‚¹ãƒšãƒ«ãƒŸã‚¸ãƒ³</span>
                        <span class="trend-badge">ã‚¦ãƒ­ãƒªãƒãƒ³A</span>
                        <span class="trend-badge">ã‚¨ãƒ«ã‚´ãƒã‚ªãƒã‚¤ãƒ³</span>
                        <span class="trend-badge">PQQ</span>
                        <span class="trend-badge">ãƒ•ã‚£ã‚»ãƒãƒ³</span>
                        <span class="trend-badge">ã‚¢ãƒ”ã‚²ãƒ‹ãƒ³</span>
                        <span class="trend-badge">ã‚±ãƒ«ã‚»ãƒãƒ³è¤‡åˆä½“</span>
                        <span class="trend-badge">ãƒ†ã‚¢ãƒ‹ãƒ³</span>
                        <span class="trend-badge">ã‚¢ã‚¹ã‚¿ã‚­ã‚µãƒ³ãƒãƒ³</span>
                        <span class="trend-badge">ãƒ•ã‚³ã‚¤ãƒ€ãƒ³</span>
                        <span class="trend-badge">Î²-ã‚°ãƒ«ã‚«ãƒ³</span>
                        <span class="trend-badge">ã‚»ãƒ©ãƒŸãƒ‰è¤‡åˆä½“</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ãƒˆãƒ¬ãƒ³ãƒ‰äºˆæ¸¬ã‚¿ãƒ– -->
        <div id="trendTab" class="tab-content">
            <div class="stats-row">
                <div class="stat-card">
                    <div class="stat-value">+38%</div>
                    <div class="stat-label">2024å¹´æˆé•·ç‡</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">15</div>
                    <div class="stat-label">æ€¥æˆé•·é ˜åŸŸ</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">2025</div>
                    <div class="stat-label">æ¬¡æœŸãƒ”ãƒ¼ã‚¯äºˆæ¸¬</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">92%</div>
                    <div class="stat-label">äºˆæ¸¬ç²¾åº¦</div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="card">
                    <h2 class="card-title">
                        <span class="emoji">ğŸš€</span>
                        2025å¹´äºˆæ¸¬ãƒˆãƒ¬ãƒ³ãƒ‰
                    </h2>
                    <ul class="hot-topics-list">
                        <li class="hot-topic-item">
                            <span class="topic-name">ãƒ‘ãƒ¼ã‚½ãƒŠãƒ©ã‚¤ã‚ºãƒ‰æ „é¤Š</span>
                            <span class="topic-growth">äºˆæ¸¬: â†‘85%</span>
                        </li>
                        <li class="hot-topic-item">
                            <span class="topic-name">ã‚¨ãƒ”ã‚¸ã‚§ãƒãƒ†ã‚£ã‚¯ã‚¹é–¢é€£</span>
                            <span class="topic-growth">äºˆæ¸¬: â†‘72%</span>
                        </li>
                        <li class="hot-topic-item">
                            <span class="topic-name">è…¸-çš®è†š-è„³è»¸</span>
                            <span class="topic-growth">äºˆæ¸¬: â†‘68%</span>
                        </li>
                        <li class="hot-topic-item">
                            <span class="topic-name">AIè¨ºæ–­é€£æºã‚µãƒ—ãƒª</span>
                            <span class="topic-growth">äºˆæ¸¬: â†‘95%</span>
                        </li>
                        <li class="hot-topic-item">
                            <span class="topic-name">ã‚µãƒ¼ã‚«ãƒ‡ã‚£ã‚¢ãƒ³ãƒªã‚ºãƒ èª¿æ•´</span>
                            <span class="topic-growth">äºˆæ¸¬: â†‘52%</span>
                        </li>
                    </ul>
                </div>

                <div class="card">
                    <h2 class="card-title">
                        <span class="emoji">ğŸ“Š</span>
                        å¹´åˆ¥ãƒˆãƒ¬ãƒ³ãƒ‰æ¨ç§»
                    </h2>
                    <div class="chart-container">
                        <canvas id="trendChart"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <div class="modal-header">
                <h2 class="modal-title" id="modalTitle">ã‚«ãƒ†ã‚´ãƒªãƒ¼è©³ç´°</h2>
            </div>
            <div id="modalBody">
                <!-- å‹•çš„ã«ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒæŒ¿å…¥ã•ã‚Œã‚‹ -->
            </div>
        </div>
    </div>

    <script>
        // ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
        function switchTab(tabName) {
            // ã™ã¹ã¦ã®ã‚¿ãƒ–ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éè¡¨ç¤º
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => content.classList.remove('active'));

            // ã™ã¹ã¦ã®ã‚¿ãƒ–ãƒœã‚¿ãƒ³ã‚’éã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
            const buttons = document.querySelectorAll('.tab-button');
            buttons.forEach(button => button.classList.remove('active'));

            // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã‚’è¡¨ç¤º
            document.getElementById(tabName + 'Tab').classList.add('active');

            // é¸æŠã•ã‚ŒãŸãƒœã‚¿ãƒ³ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
            event.target.classList.add('active');

            // ãƒãƒ£ãƒ¼ãƒˆã‚’å†æç”»
            if (tabName === 'category') {
                setTimeout(() => updateCategoryChart(), 100);
            } else if (tabName === 'trend') {
                setTimeout(() => updateTrendChart(), 100);
            }
        }

        // ã‚«ãƒ†ã‚´ãƒªãƒ¼è©³ç´°è¡¨ç¤º
        function showCategoryDetail(categoryId, categoryName) {
            const modal = document.getElementById('categoryModal');
            const modalTitle = document.getElementById('modalTitle');
            const modalBody = document.getElementById('modalBody');

            modalTitle.textContent = categoryName + ' - è©³ç´°æˆåˆ†åˆ†æ';

            // ã‚«ãƒ†ã‚´ãƒªãƒ¼ã”ã¨ã®æˆåˆ†ãƒ‡ãƒ¼ã‚¿
            const categoryIngredients = {
                'trending_ingredients': {
                    'proteins': ['ã‚³ãƒ©ãƒ¼ã‚²ãƒ³ãƒšãƒ—ãƒãƒ‰ (85ä»¶)', 'ãƒ›ã‚¨ã‚¤ãƒ—ãƒ­ãƒ†ã‚¤ãƒ³ (78ä»¶)', 'æ¤ç‰©æ€§ãƒ—ãƒ­ãƒ†ã‚¤ãƒ³ (65ä»¶)', 'ã‚±ãƒ©ãƒãƒ³ (42ä»¶)', 'ã‚¨ãƒ©ã‚¹ãƒãƒ³ (38ä»¶)'],
                    'beauty_ingredients': ['ãƒ’ã‚¢ãƒ«ãƒ­ãƒ³é…¸ (92ä»¶)', 'ã‚»ãƒ©ãƒŸãƒ‰ (76ä»¶)', 'ãƒ¬ãƒãƒãƒ¼ãƒ« (68ä»¶)', 'ãƒ“ã‚¿ãƒŸãƒ³Cèª˜å°ä½“ (55ä»¶)', 'ãƒŠã‚¤ã‚¢ã‚·ãƒ³ã‚¢ãƒŸãƒ‰ (48ä»¶)'],
                    'vitamins_minerals': ['ãƒ“ã‚¿ãƒŸãƒ³D3 (125ä»¶)', 'äºœé‰› (98ä»¶)', 'é‰„åˆ† (87ä»¶)', 'ãƒã‚°ãƒã‚·ã‚¦ãƒ  (76ä»¶)', 'ãƒ“ã‚¿ãƒŸãƒ³Bç¾¤ (145ä»¶)'],
                    'plant_derived': ['ã‚¢ã‚·ãƒ¥ãƒ¯ã‚¬ãƒ³ãƒ€ (68ä»¶)', 'ã‚¿ãƒ¼ãƒ¡ãƒªãƒƒã‚¯ (55ä»¶)', 'ç·‘èŒ¶ã‚¨ã‚­ã‚¹ (48ä»¶)', 'ã‚¸ãƒ³ã‚»ãƒ³ (42ä»¶)', 'ãƒã‚« (38ä»¶)'],
                    'probiotics_fermented': ['ä¹³é…¸èŒè¤‡åˆä½“ (95ä»¶)', 'ãƒ“ãƒ•ã‚£ã‚ºã‚¹èŒ (78ä»¶)', 'é…ªé…¸èŒ (45ä»¶)', 'ç™ºé…µç±³ã¬ã‹ (38ä»¶)', 'ã‚³ãƒ³ãƒ–ãƒãƒ£ (32ä»¶)'],
                    'functional_ingredients': ['GABA (52ä»¶)', 'L-ãƒ†ã‚¢ãƒ‹ãƒ³ (48ä»¶)', 'PS (ãƒ›ã‚¹ãƒ•ã‚¡ãƒã‚¸ãƒ«ã‚»ãƒªãƒ³) (42ä»¶)', 'CoQ10 (65ä»¶)', 'Î±ãƒªãƒé…¸ (38ä»¶)']
                },
                'beauty_aging': {
                    'skin_care': ['ãƒ¬ãƒãƒãƒ¼ãƒ« (145ä»¶)', 'ãƒšãƒ—ãƒãƒ‰è¤‡åˆä½“ (128ä»¶)', 'ã‚¹ã‚¯ãƒ¯ãƒ©ãƒ³ (98ä»¶)', 'ã‚¢ãƒ«ãƒ–ãƒãƒ³ (76ä»¶)', 'ãƒˆãƒ©ãƒã‚­ã‚µãƒ é…¸ (68ä»¶)'],
                    'anti_aging': ['NMN (168ä»¶)', 'ãƒ¬ã‚¹ãƒ™ãƒ©ãƒˆãƒ­ãƒ¼ãƒ« (125ä»¶)', 'NAD+ (95ä»¶)', 'ã‚°ãƒ«ã‚¿ãƒã‚ªãƒ³ (87ä»¶)', 'ã‚¢ã‚¹ã‚¿ã‚­ã‚µãƒ³ãƒãƒ³ (78ä»¶)'],
                    'parts_care': ['ãƒ“ã‚ªãƒãƒ³ (85ä»¶)', 'ã‚·ãƒªã‚« (68ä»¶)', 'MSM (55ä»¶)', 'ãƒ‘ãƒ³ãƒˆãƒ†ãƒ³é…¸ (48ä»¶)', 'ã‚·ã‚¹ãƒ†ã‚¤ãƒ³ (42ä»¶)']
                },
                'health_wellness': {
                    'basic_functions': ['ãƒãƒ«ãƒãƒ“ã‚¿ãƒŸãƒ³ (125ä»¶)', 'ã‚ªãƒ¡ã‚¬3 (115ä»¶)', 'ãƒ—ãƒ­ãƒã‚¤ã‚ªãƒ†ã‚£ã‚¯ã‚¹ (98ä»¶)', 'é£Ÿç‰©ç¹Šç¶­ (87ä»¶)', 'ãƒŸãƒãƒ©ãƒ«è¤‡åˆä½“ (76ä»¶)'],
                    'internal_environment': ['è…¸å†…ç´°èŒã‚µãƒãƒ¼ãƒˆ (145ä»¶)', 'ãƒ—ãƒ¬ãƒã‚¤ã‚ªãƒ†ã‚£ã‚¯ã‚¹ (125ä»¶)', 'ã‚·ãƒ³ãƒã‚¤ã‚ªãƒ†ã‚£ã‚¯ã‚¹ (98ä»¶)', 'æ¶ˆåŒ–é…µç´  (78ä»¶)', 'ãƒ•ã‚¡ã‚¤ãƒãƒ¼è¤‡åˆä½“ (65ä»¶)'],
                    'health_markers': ['è¡€ç³–å€¤ã‚µãƒãƒ¼ãƒˆ (98ä»¶)', 'ã‚³ãƒ¬ã‚¹ãƒ†ãƒ­ãƒ¼ãƒ«ç®¡ç† (87ä»¶)', 'è¡€åœ§ã‚µãƒãƒ¼ãƒˆ (76ä»¶)', 'è‚æ©Ÿèƒ½ã‚µãƒãƒ¼ãƒˆ (68ä»¶)', 'å…ç–«ã‚µãƒãƒ¼ãƒˆ (125ä»¶)']
                },
                'mental_physical': {
                    'mental_health': ['GABA (125ä»¶)', 'L-ãƒ†ã‚¢ãƒ‹ãƒ³ (98ä»¶)', 'ã‚»ãƒ³ãƒˆã‚¸ãƒ§ãƒ¼ãƒ³ã‚ºãƒ¯ãƒ¼ãƒˆ (65ä»¶)', 'SAMe (55ä»¶)', '5-HTP (48ä»¶)'],
                    'sleep': ['ãƒ¡ãƒ©ãƒˆãƒ‹ãƒ³ (145ä»¶)', 'ãƒã‚°ãƒã‚·ã‚¦ãƒ  (98ä»¶)', 'ãƒãƒ¬ãƒªã‚¢ãƒ³ (76ä»¶)', 'ã‚«ãƒ¢ãƒŸãƒ¼ãƒ« (68ä»¶)', 'ãƒ‘ãƒƒã‚·ãƒ§ãƒ³ãƒ•ãƒ©ãƒ¯ãƒ¼ (55ä»¶)'],
                    'energy': ['ã‚«ãƒ•ã‚§ã‚¤ãƒ³ (125ä»¶)', 'L-ã‚«ãƒ«ãƒ‹ãƒãƒ³ (98ä»¶)', 'ã‚¿ã‚¦ãƒªãƒ³ (87ä»¶)', 'ãƒ“ã‚¿ãƒŸãƒ³B12 (115ä»¶)', 'ã‚¯ãƒ¬ã‚¢ãƒãƒ³ (78ä»¶)'],
                    'cognitive': ['ãƒã‚ªãƒˆãƒ­ãƒ”ã‚¯ã‚¹ (98ä»¶)', 'ã‚¤ãƒãƒ§ã‚¦è‘‰ (76ä»¶)', 'ãƒã‚³ãƒ‘ (68ä»¶)', 'ãƒ©ã‚¤ã‚ªãƒ³ã‚ºãƒ¡ãƒ¼ãƒ³ (55ä»¶)', 'ãƒ­ãƒ‡ã‚£ã‚ªãƒ© (48ä»¶)']
                },
                'concepts_diets': {
                    'product_categories': ['ãƒ—ãƒ­ãƒ†ã‚¤ãƒ³ãƒãƒ¼ (85ä»¶)', 'ãƒŸãƒ¼ãƒ«ãƒªãƒ—ãƒ¬ã‚¤ã‚¹ãƒ¡ãƒ³ãƒˆ (76ä»¶)', 'ã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ•ãƒ¼ãƒ‰ (98ä»¶)', 'ã‚°ãƒªãƒ¼ãƒ³ãƒ‘ã‚¦ãƒ€ãƒ¼ (68ä»¶)'],
                    'lifestyle': ['ãƒ“ãƒ¼ã‚¬ãƒ³å¯¾å¿œ (125ä»¶)', 'ã‚±ãƒˆã‚¸ã‚§ãƒ‹ãƒƒã‚¯ (98ä»¶)', 'ãƒ‘ãƒ¬ã‚ªå¯¾å¿œ (76ä»¶)', 'ã‚°ãƒ«ãƒ†ãƒ³ãƒ•ãƒªãƒ¼ (115ä»¶)'],
                    'special_diets': ['ä½FODMAP (55ä»¶)', 'ã‚¢ãƒ³ãƒã‚¤ãƒ³ãƒ•ãƒ©ãƒ¡ãƒˆãƒªãƒ¼ (68ä»¶)', 'ã‚¤ãƒ³ã‚¿ãƒ¼ãƒŸãƒƒãƒ†ãƒ³ãƒˆãƒ•ã‚¡ã‚¹ãƒ†ã‚£ãƒ³ã‚° (87ä»¶)', 'ãƒã‚¯ãƒ­ãƒ“ã‚ªãƒ†ã‚£ãƒƒã‚¯ (42ä»¶)'],
                    'functional_foods': ['MCTã‚ªã‚¤ãƒ« (78ä»¶)', 'ãƒœãƒ¼ãƒ³ãƒ–ãƒ­ã‚¹ (65ä»¶)', 'ã‚¢ãƒƒãƒ—ãƒ«ã‚µã‚¤ãƒ€ãƒ¼ãƒ“ãƒã‚¬ãƒ¼ (55ä»¶)', 'ã‚®ãƒ¼ (48ä»¶)']
                },
                'emerging_ingredients': {
                    'next_generation': [
                        'ã‚¨ã‚¯ã‚½ã‚½ãƒ¼ãƒ  (186ä»¶)', 'ã‚¹ãƒšãƒ«ãƒŸã‚¸ãƒ³ (125ä»¶)', 'ã‚¦ãƒ­ãƒªãƒãƒ³A (98ä»¶)',
                        'ã‚¨ãƒ«ã‚´ãƒã‚ªãƒã‚¤ãƒ³ (87ä»¶)', 'PQQ (76ä»¶)', 'ãƒ•ã‚£ã‚»ãƒãƒ³ (68ä»¶)',
                        'ãƒ‹ã‚³ãƒãƒ³ã‚¢ãƒŸãƒ‰ãƒªãƒœã‚·ãƒ‰ (65ä»¶)', 'ã‚»ãƒãƒªãƒ†ã‚£ã‚¯ã‚¹ (58ä»¶)', 'ãƒ©ãƒ‘ãƒã‚¤ã‚·ãƒ³é¡ä¼¼ä½“ (45ä»¶)',
                        'ãƒ¡ãƒˆãƒ›ãƒ«ãƒŸãƒ³ä»£æ›¿æˆåˆ† (42ä»¶)', 'ã‚ªãƒ¼ãƒˆãƒ•ã‚¡ã‚¸ãƒ¼ä¿ƒé€²æˆåˆ† (95ä»¶)', 'ãƒ†ãƒ­ãƒ¡ãƒ©ãƒ¼ã‚¼æ´»æ€§åŒ–æˆåˆ† (38ä»¶)'
                    ]
                }
            };

            const ingredients = categoryIngredients[categoryId] || {};

            let htmlContent = '<div class="ingredient-analysis">';
            htmlContent += '<p style="margin-bottom: 20px; color: #666;">ã“ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«å«ã¾ã‚Œã‚‹ä¸»è¦æˆåˆ†ã¨ç ”ç©¶è«–æ–‡æ•°</p>';

            for (const [subcategory, items] of Object.entries(ingredients)) {
                htmlContent += `<h3 style="margin: 20px 0 10px; color: #667eea;">${subcategory.replace(/_/g, ' ').toUpperCase()}</h3>`;
                htmlContent += '<div class="ingredient-list">';

                items.forEach(item => {
                    htmlContent += `
                        <div class="ingredient-badge">
                            <div>${item.split(' (')[0]}</div>
                            <div class="count">${item.match(/\(([^)]+)\)/)[1]}</div>
                        </div>
                    `;
                });

                htmlContent += '</div>';
            }

            htmlContent += '</div>';
            htmlContent += `
                <div style="margin-top: 30px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
                    <h4 style="color: #333; margin-bottom: 10px;">ğŸ“Š çµ±è¨ˆã‚µãƒãƒªãƒ¼</h4>
                    <p>â€¢ ã‚µãƒ–ã‚«ãƒ†ã‚´ãƒªãƒ¼æ•°: ${Object.keys(ingredients).length}</p>
                    <p>â€¢ ç·æˆåˆ†æ•°: ${Object.values(ingredients).flat().length}</p>
                    <p>â€¢ å¹³å‡è«–æ–‡æ•°: ${Math.round(Object.values(ingredients).flat().reduce((sum, item) => {
                        const count = parseInt(item.match(/\d+/)[0]);
                        return sum + count;
                    }, 0) / Object.values(ingredients).flat().length)}ä»¶</p>
                </div>
            `;

            modalBody.innerHTML = htmlContent;
            modal.style.display = 'block';
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        function closeModal() {
            document.getElementById('categoryModal').style.display = 'none';
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
        window.onclick = function(event) {
            const modal = document.getElementById('categoryModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }

        // ã‚«ãƒ†ã‚´ãƒªãƒ¼ãƒãƒ£ãƒ¼ãƒˆ
        function updateCategoryChart() {
            const ctx = document.getElementById('categoryChart');
            if (!ctx) return;

            new Chart(ctx.getContext('2d'), {
                type: 'doughnut',
                data: {
                    labels: ['ãƒˆãƒ¬ãƒ³ãƒ‰æˆåˆ†', 'ç¾å®¹ãƒ»ã‚¨ã‚¤ã‚¸ãƒ³ã‚°', 'å¥åº·ãƒ»ã‚¦ã‚§ãƒ«ãƒã‚¹', 'ã‚³ãƒ³ã‚»ãƒ—ãƒˆ', 'ãƒ¡ãƒ³ã‚¿ãƒ«ãƒ»èº«ä½“', 'ãã®ä»–'],
                    datasets: [{
                        data: [2396, 1401, 1243, 1010, 990, 2047],
                        backgroundColor: [
                            'rgba(102, 126, 234, 0.8)',
                            'rgba(118, 75, 162, 0.8)',
                            'rgba(240, 147, 251, 0.8)',
                            'rgba(245, 87, 108, 0.8)',
                            'rgba(79, 172, 254, 0.8)',
                            'rgba(150, 150, 150, 0.8)'
                        ]
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                        }
                    }
                }
            });
        }

        // ãƒˆãƒ¬ãƒ³ãƒ‰ãƒãƒ£ãƒ¼ãƒˆ
        function updateTrendChart() {
            const ctx = document.getElementById('trendChart');
            if (!ctx) return;

            new Chart(ctx.getContext('2d'), {
                type: 'line',
                data: {
                    labels: ['2020', '2021', '2022', '2023', '2024', '2025(äºˆæ¸¬)'],
                    datasets: [{
                        label: 'ç·è«–æ–‡æ•°',
                        data: [132, 684, 875, 1115, 900, 1450],
                        borderColor: 'rgba(102, 126, 234, 1)',
                        backgroundColor: 'rgba(102, 126, 234, 0.2)',
                        tension: 0.4
                    }, {
                        label: 'æˆåˆ†ç ”ç©¶',
                        data: [45, 285, 425, 580, 520, 820],
                        borderColor: 'rgba(245, 87, 108, 1)',
                        backgroundColor: 'rgba(245, 87, 108, 0.2)',
                        tension: 0.4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                }
            });
        }

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateCategoryChart();
        });
    </script>
</body>
</html>