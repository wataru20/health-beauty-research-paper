# ğŸ”§ ãƒ†ã‚¹ãƒˆå€¤ç½®ãæ›ãˆè¨ˆç”»

## ğŸ“Š ç¾çŠ¶åˆ†æ

### ãƒ†ã‚¹ãƒˆå€¤ä¸€è¦§

| # | é …ç›® | å ´æ‰€ | ç¾çŠ¶ | é‡è¦åº¦ | å¯¾ç­– |
|---|------|------|------|--------|------|
| 1 | å¸‚å ´è¦æ¨¡ | line:414 | random(100-1500å„„å††) | ğŸ”´ é«˜ | ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªã‚µãƒ¼ãƒ |
| 2 | æ¨å¥¨ç”¨é‡ | line:416 | random(5-5000mg) | ğŸ”´ é«˜ | åšåŠ´çœãƒ‡ãƒ¼ã‚¿ |
| 3 | æˆé•·ç‡ | line:373-378 | random(60-250%) | ğŸ”´ é«˜ | å®Ÿè¨ˆç®—ã«å¤‰æ›´ |
| 4 | keyFindings | line:386-399 | random(20-95%) | ğŸ”´ é«˜ | è«–æ–‡æŠ½å‡º |
| 5 | è«–æ–‡æ—¥ä»˜ | line:285 | random(0-730æ—¥å‰) | ğŸŸ¡ ä¸­ | å®Ÿãƒ‡ãƒ¼ã‚¿ä½¿ç”¨ |
| 6 | å¼•ç”¨æ•°/IF | line:306-307 | random | ğŸŸ¡ ä¸­ | PubMed API |
| 7 | å®‰å…¨æ€§ãƒ©ãƒ™ãƒ« | line:417-422 | randomé¸æŠ | ğŸŸ¡ ä¸­ | å›ºå®šè¾æ›¸ |

---

## ğŸ¯ ä¿®æ­£ãƒ—ãƒ©ãƒ³ï¼ˆ3ãƒ•ã‚§ãƒ¼ã‚ºï¼‰

### **ãƒ•ã‚§ãƒ¼ã‚º1: å³åº§ã«ä¿®æ­£å¯èƒ½ï¼ˆä½œæ¥­æ™‚é–“: 1-2æ™‚é–“ï¼‰**

#### âœ… 1-1. æˆé•·ç‡ã®å®Ÿè¨ˆç®—åŒ–
**ç¾çŠ¶**: line:373-378
```python
base_growth = {
    '30d': random.randint(120, 250),
    '90d': random.randint(100, 200),
    '1y': random.randint(80, 180),
    '2y': random.randint(60, 160)
}[period]
```

**ä¿®æ­£æ¡ˆ**:
```python
# å®Ÿéš›ã®è«–æ–‡æ•°ã‹ã‚‰æˆé•·ç‡ã‚’è¨ˆç®—
def calculate_real_growth_rate(current_papers, period):
    # å‰æœŸé–“ã®ãƒ‡ãƒ¼ã‚¿ã¨æ¯”è¼ƒ
    if period == '30d':
        prev_period_papers = [p for p in all_papers if 31 <= p['days_ago'] <= 60]
    elif period == '90d':
        prev_period_papers = [p for p in all_papers if 91 <= p['days_ago'] <= 180]
    elif period == '1y':
        prev_period_papers = [p for p in all_papers if 366 <= p['days_ago'] <= 730]
    else:
        prev_period_papers = []

    if len(prev_period_papers) > 0:
        growth_rate = int(((len(current_papers) - len(prev_period_papers)) / len(prev_period_papers)) * 100)
    else:
        growth_rate = 100

    return max(-100, min(500, growth_rate))  # -100%ã€œ+500%ã«åˆ¶é™
```

**ãƒ¡ãƒªãƒƒãƒˆ**: å®Ÿãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€ã™ãå®Ÿè£…å¯èƒ½

---

#### âœ… 1-2. å®‰å…¨æ€§ãƒ©ãƒ™ãƒ«ã®å›ºå®šåŒ–
**ç¾çŠ¶**: line:417-422 ãƒ©ãƒ³ãƒ€ãƒ é¸æŠ

**ä¿®æ­£æ¡ˆ**:
```python
# æˆåˆ†ã”ã¨ã®å®‰å…¨æ€§ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
safety_database = {
    'ã‚³ãƒ©ãƒ¼ã‚²ãƒ³': 'æ©Ÿèƒ½æ€§è¡¨ç¤ºé£Ÿå“å±Šå‡ºæ¸ˆã¿',
    'ãƒ“ã‚¿ãƒŸãƒ³C': 'GRASèªå®šå–å¾—',
    'ãƒ“ã‚¿ãƒŸãƒ³D': 'æ©Ÿèƒ½æ€§è¡¨ç¤ºé£Ÿå“å±Šå‡ºæ¸ˆã¿',
    'ãƒ—ãƒ­ãƒã‚¤ã‚ªãƒ†ã‚£ã‚¯ã‚¹': 'é£ŸçµŒé¨“è±Šå¯Œ',
    'NMN': 'é•·æœŸæ‘‚å–ã§ã‚‚å®‰å…¨æ€§ç¢ºèªæ¸ˆã¿',
    # ... ä¸»è¦20æˆåˆ†
}

safety = safety_database.get(topic_name, 'è¦æ¤œè¨¼')
```

**ãƒ¡ãƒªãƒƒãƒˆ**: æ­£ç¢ºã€ã™ãå®Ÿè£…å¯èƒ½

---

#### âœ… 1-3. æ¨å¥¨ç”¨é‡ã®å›ºå®šåŒ–
**ç¾çŠ¶**: line:416 `random.randint(5, 5000)mg/æ—¥`

**ä¿®æ­£æ¡ˆ**:
```python
# åšç”ŸåŠ´åƒçœã€Œæ—¥æœ¬äººã®é£Ÿäº‹æ‘‚å–åŸºæº–ã€ãƒ™ãƒ¼ã‚¹
dosage_database = {
    'ãƒ“ã‚¿ãƒŸãƒ³C': {'amount': 100, 'unit': 'mg/æ—¥', 'source': 'åšåŠ´çœ2020'},
    'ãƒ“ã‚¿ãƒŸãƒ³D': {'amount': 8.5, 'unit': 'Î¼g/æ—¥', 'source': 'åšåŠ´çœ2020'},
    'ãƒ“ã‚¿ãƒŸãƒ³E': {'amount': 6.0, 'unit': 'mg/æ—¥', 'source': 'åšåŠ´çœ2020'},
    'é‰„': {'amount': 10.5, 'unit': 'mg/æ—¥', 'source': 'åšåŠ´çœ2020'},
    'ã‚«ãƒ«ã‚·ã‚¦ãƒ ': {'amount': 700, 'unit': 'mg/æ—¥', 'source': 'åšåŠ´çœ2020'},
    'ãƒã‚°ãƒã‚·ã‚¦ãƒ ': {'amount': 340, 'unit': 'mg/æ—¥', 'source': 'åšåŠ´çœ2020'},
    'äºœé‰›': {'amount': 11, 'unit': 'mg/æ—¥', 'source': 'åšåŠ´çœ2020'},
    'EPA': {'amount': 1000, 'unit': 'mg/æ—¥', 'source': 'æ—¥æœ¬è„‚è³ªæ „é¤Šå­¦ä¼š'},
    'DHA': {'amount': 1000, 'unit': 'mg/æ—¥', 'source': 'æ—¥æœ¬è„‚è³ªæ „é¤Šå­¦ä¼š'},
    'ã‚³ãƒ©ãƒ¼ã‚²ãƒ³': {'amount': 5000, 'unit': 'mg/æ—¥', 'source': 'è‡¨åºŠè©¦é¨“å¹³å‡'},
    'ãƒ—ãƒ­ãƒã‚¤ã‚ªãƒ†ã‚£ã‚¯ã‚¹': {'amount': 1000000000, 'unit': 'CFU/æ—¥', 'source': 'æ©Ÿèƒ½æ€§è¡¨ç¤ºé£Ÿå“'},
    'NMN': {'amount': 250, 'unit': 'mg/æ—¥', 'source': 'è‡¨åºŠè©¦é¨“'},
    'ã‚¯ãƒ«ã‚¯ãƒŸãƒ³': {'amount': 1500, 'unit': 'mg/æ—¥', 'source': 'è‡¨åºŠè©¦é¨“'},
    'ãƒãƒªãƒ•ã‚§ãƒãƒ¼ãƒ«': {'amount': 1000, 'unit': 'mg/æ—¥', 'source': 'æ¨å¥¨é‡'},
    # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
}

dosage_info = dosage_database.get(topic_name, {'amount': 0, 'unit': 'mg/æ—¥', 'source': 'N/A'})
dosage = f"{dosage_info['amount']}{dosage_info['unit']}" if dosage_info['amount'] > 0 else 'N/A'
```

**ãƒ¡ãƒªãƒƒãƒˆ**: å…¬çš„ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€ä¿¡é ¼æ€§é«˜ã„

---

### **ãƒ•ã‚§ãƒ¼ã‚º2: ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªã‚µãƒ¼ãƒå¾Œï¼ˆä½œæ¥­æ™‚é–“: 5-10æ™‚é–“ï¼‰**

#### ğŸ”„ 2-1. å¸‚å ´è¦æ¨¡ã®å®Ÿãƒ‡ãƒ¼ã‚¿åŒ–
**ã‚¿ã‚¹ã‚¯**: DEEP_RESEARCH_PROMPT.mdã‚’ä½¿ç”¨ã—ã¦ãƒªã‚µãƒ¼ãƒ
**ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹**:
- å¯Œå£«çµŒæ¸ˆ
- çŸ¢é‡çµŒæ¸ˆç ”ç©¶æ‰€
- TPCãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°

**å®Ÿè£…**:
```python
market_size_database = {
    'ã‚³ãƒ©ãƒ¼ã‚²ãƒ³': {'2024': 450, '2023': 420, 'source': 'å¯Œå£«çµŒæ¸ˆ2024'},
    'EPA': {'2024': 350, '2023': 320, 'source': 'çŸ¢é‡çµŒæ¸ˆ2024'},
    # ... ãƒªã‚µãƒ¼ãƒçµæœã‚’è¿½åŠ 
}

market_data = market_size_database.get(topic_name, {'2024': 0})
if market_data['2024'] > 0:
    marketSize = f"2024å¹´äºˆæ¸¬ï¼š{market_data['2024']}å„„å††"
else:
    # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: è«–æ–‡æ•°ãƒ™ãƒ¼ã‚¹ã®æ¨å®š
    estimated_size = len(topic_papers) * 3  # ä¿‚æ•°ã¯è¦èª¿æ•´
    marketSize = f"2024å¹´æ¨å®šï¼š{estimated_size}å„„å††"
```

---

#### ğŸ”„ 2-2. keyFindingsã®è«–æ–‡æŠ½å‡º
**ã‚¿ã‚¹ã‚¯**: LLMã§ä¸»è¦è«–æ–‡ã‹ã‚‰å…·ä½“çš„æ•°å€¤ã‚’æŠ½å‡º

**å®Ÿè£…æ¡ˆ**:
```python
# è«–æ–‡ã‚¿ã‚¤ãƒˆãƒ«ãƒ»ã‚¢ãƒ–ã‚¹ãƒˆãƒ©ã‚¯ãƒˆã‹ã‚‰LLMã§æŠ½å‡º
def extract_key_findings_from_papers(papers, ingredient_name):
    # ä¸Šä½3ä»¶ã®è«–æ–‡ã‚’é¸æŠ
    top_papers = sorted(papers, key=lambda x: x['citations'], reverse=True)[:3]

    # LLM APIã§å„è«–æ–‡ã‹ã‚‰å…·ä½“çš„æ•°å€¤ã‚’æŠ½å‡º
    findings = []
    for paper in top_papers:
        # Gemini/GPT APIã§æŠ½å‡º
        finding = llm_extract_finding(paper['title'], ingredient_name)
        findings.append(finding)

    return findings[:3]
```

**ä»£æ›¿æ¡ˆï¼ˆç°¡æ˜“ç‰ˆï¼‰**: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ + è«–æ–‡æ•°ãƒ™ãƒ¼ã‚¹
```python
def generate_findings_from_data(topic_name, paper_count, clinical_trial_count):
    findings = []

    # è‡¨åºŠè©¦é¨“ãŒå¤šã„å ´åˆ
    if clinical_trial_count > 5:
        findings.append(f'{topic_name}ã®æœ‰åŠ¹æ€§ãŒ{clinical_trial_count}ä»¶ã®è‡¨åºŠè©¦é¨“ã§ç¢ºèª')

    # è«–æ–‡æ•°ãŒå¤šã„å ´åˆ
    if paper_count > 100:
        findings.append(f'å¤§è¦æ¨¡ç ”ç©¶ã«ã‚ˆã‚Š{topic_name}ã®å®‰å…¨æ€§ãŒå®Ÿè¨¼')

    # ãƒ¡ã‚«ãƒ‹ã‚ºãƒ æƒ…å ±ï¼ˆå›ºå®šè¾æ›¸ï¼‰
    mechanism = mechanism_database.get(topic_name, 'è©³ç´°ç ”ç©¶ä¸­')
    findings.append(mechanism)

    return findings[:3]
```

---

### **ãƒ•ã‚§ãƒ¼ã‚º3: ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼ˆä½™è£•ãŒã‚ã‚Œã°ï¼‰**

#### ğŸ”µ 3-1. è«–æ–‡æ—¥ä»˜ã®å®Ÿãƒ‡ãƒ¼ã‚¿åŒ–
**ã‚¿ã‚¹ã‚¯**: å…ƒãƒ‡ãƒ¼ã‚¿ã«æ—¥ä»˜ãŒã‚ã‚Œã°ä½¿ç”¨

**å®Ÿè£…**:
```python
# ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿æ™‚ã«å®Ÿéš›ã®æ—¥ä»˜ã‚’ä½¿ç”¨
pub_date_str = paper.get('publication_date', None)
if pub_date_str:
    pub_date = datetime.strptime(pub_date_str, '%Y-%m-%d')
    days_ago = (datetime.now() - pub_date).days
else:
    # ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯: ãƒ©ãƒ³ãƒ€ãƒ å‰²ã‚Šå½“ã¦
    days_ago = random.randint(1, 730)
```

---

#### ğŸ”µ 3-2. å¼•ç”¨æ•°ãƒ»Impact Factorã®å–å¾—
**ã‚¿ã‚¹ã‚¯**: PubMed APIã¾ãŸã¯Crossref APIã§å–å¾—

**å®Ÿè£…**:
```python
import requests

def get_citation_count(pmid):
    # PubMed API ã¾ãŸã¯ Semantic Scholar API
    response = requests.get(f'https://api.semanticscholar.org/v1/paper/PMID:{pmid}')
    if response.status_code == 200:
        data = response.json()
        return data.get('citationCount', 0)
    return 0
```

---

## â±ï¸ ä½œæ¥­æ™‚é–“è¦‹ç©ã‚‚ã‚Š

| ãƒ•ã‚§ãƒ¼ã‚º | å†…å®¹ | æ™‚é–“ | é›£æ˜“åº¦ |
|---------|------|------|--------|
| ãƒ•ã‚§ãƒ¼ã‚º1-1 | æˆé•·ç‡å®Ÿè¨ˆç®— | 30åˆ† | â­ |
| ãƒ•ã‚§ãƒ¼ã‚º1-2 | å®‰å…¨æ€§å›ºå®šåŒ– | 30åˆ† | â­ |
| ãƒ•ã‚§ãƒ¼ã‚º1-3 | æ¨å¥¨ç”¨é‡å›ºå®šåŒ– | 1æ™‚é–“ | â­â­ |
| ãƒ•ã‚§ãƒ¼ã‚º2-1 | å¸‚å ´è¦æ¨¡ãƒªã‚µãƒ¼ãƒ | 5-10æ™‚é–“ | â­â­â­â­ |
| ãƒ•ã‚§ãƒ¼ã‚º2-2 | keyFindingsæŠ½å‡º | 2-3æ™‚é–“ | â­â­â­ |
| ãƒ•ã‚§ãƒ¼ã‚º3-1 | è«–æ–‡æ—¥ä»˜å®Ÿãƒ‡ãƒ¼ã‚¿ | 1æ™‚é–“ | â­â­ |
| ãƒ•ã‚§ãƒ¼ã‚º3-2 | å¼•ç”¨æ•°APIå–å¾— | 2æ™‚é–“ | â­â­â­ |

**åˆè¨ˆ**: 12-18æ™‚é–“

---

## ğŸš€ æ¨å¥¨å®Ÿè¡Œé †åº

### **ä»Šã™ãé–‹å§‹ï¼ˆå„ªå…ˆåº¦ï¼šæœ€é«˜ï¼‰**
1. âœ… ãƒ•ã‚§ãƒ¼ã‚º1-1: æˆé•·ç‡ã®å®Ÿè¨ˆç®—åŒ–ï¼ˆ30åˆ†ï¼‰
2. âœ… ãƒ•ã‚§ãƒ¼ã‚º1-2: å®‰å…¨æ€§ãƒ©ãƒ™ãƒ«å›ºå®šåŒ–ï¼ˆ30åˆ†ï¼‰
3. âœ… ãƒ•ã‚§ãƒ¼ã‚º1-3: æ¨å¥¨ç”¨é‡å›ºå®šåŒ–ï¼ˆ1æ™‚é–“ï¼‰

â†’ **åˆè¨ˆ2æ™‚é–“ã§ä¸»è¦ãªãƒ†ã‚¹ãƒˆå€¤ã‚’æ’é™¤**

### **ä¸¦è¡Œä½œæ¥­ï¼ˆãƒ‡ã‚£ãƒ¼ãƒ—ãƒªã‚µãƒ¼ãƒä¸­ï¼‰**
- ğŸ”„ ãƒ•ã‚§ãƒ¼ã‚º2-1: å¸‚å ´è¦æ¨¡ã®ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªã‚µãƒ¼ãƒï¼ˆé€²è¡Œä¸­ï¼‰

### **ãƒªã‚µãƒ¼ãƒå®Œäº†å¾Œ**
- ğŸ”„ ãƒ•ã‚§ãƒ¼ã‚º2-2: keyFindingsæœ€é©åŒ–
- ğŸ”µ ãƒ•ã‚§ãƒ¼ã‚º3: ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½

---

## ğŸ“ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

ã©ã®ãƒ•ã‚§ãƒ¼ã‚ºã‹ã‚‰å§‹ã‚ã¾ã™ã‹ï¼Ÿ

**æ¨å¥¨**: ãƒ•ã‚§ãƒ¼ã‚º1ï¼ˆ1-1, 1-2, 1-3ï¼‰ã‚’ä»Šã™ãå®Ÿè£…
â†’ 2æ™‚é–“ã§å¤§å¹…ã«ç²¾åº¦å‘ä¸Š

å®Ÿè£…ã‚’é–‹å§‹ã—ã¾ã™ã‹ï¼Ÿ
